---
title: 说说 HTTP/1.0、1.1 和 HTTP/2.0 的区别
tags: [HTTP, 网络协议, 性能优化]
---

## 📌 一、什么是 HTTP 协议？

**HTTP（HyperText Transfer Protocol）** 是一种应用层协议，用于客户端（浏览器）与服务器之间的通信。它定义了数据传输的格式与流程，是现代 Web 的核心。

HTTP 协议经历了多个版本的演进，最常见的是：**HTTP/1.0、HTTP/1.1 和 HTTP/2.0**。

---

## 🧠 二、HTTP/1.0 的特点

- **无连接、无状态：** 每次请求都需要重新建立 TCP 连接，完成后立即断开。
- **带宽浪费：** 每次请求都重复发送完整的头部信息（纯文本格式）。
- **缓存支持有限：** 只有基本的 `Expires` 和 `Last-Modified`。
- **不支持虚拟主机：** 同一 IP 无法区分多个域名服务。

```text
特点总结：
✔ 简单直接
✘ 每个请求一次连接，资源利用率低
```

---

## 🔄 三、HTTP/1.1 的优化与改进

HTTP/1.1 在 1.0 的基础上做了大量优化，使得性能和灵活性显著提升。

### ✅ 核心优化：

| 特性         | 说明                                            |
| ---------- | --------------------------------------------- |
| **持久连接**   | 默认开启 `Connection: keep-alive`，多个请求复用一个 TCP 连接 |
| **管道化请求**  | 支持并行发起多个请求，无需等待前一个完成（但仍需按顺序响应）                |
| **分块传输编码** | 使用 `Transfer-Encoding: chunked` 传输动态内容        |
| **缓存控制增强** | 新增 `ETag`、`If-None-Match`、`Cache-Control` 等   |
| **支持虚拟主机** | 引入 `Host` 字段，同一 IP 支持多个站点                     |
| **断点续传**   | 使用 `Range` 请求部分内容，提高效率                        |

```text
特点总结：
✔ 长连接、节省 TCP 开销
✔ 缓存与带宽优化
✘ 仍然存在队头阻塞（一个连接一次只能响应一个请求）
```

---

## 🚀 四、HTTP/2.0 的重大变革

HTTP/2.0 是一项重构性的改进，专注于性能提升，底层机制发生了重大变化。

### 🔧 主要特性：

| 特性                     | 描述                                |
| ---------------------- | --------------------------------- |
| **多路复用（Multiplexing）** | 一个 TCP 连接中可以同时并发多个请求/响应，互不干扰      |
| **二进制分帧**              | HTTP/2 通信以帧为单位传输，采用二进制编码，更高效、更易解析 |
| **首部压缩（HPACK）**        | 使用头部表进行键值对压缩，避免重复头部开销             |
| **服务器推送（Server Push）** | 服务器可以主动向客户端推送资源，无需客户端显式请求         |

---

### ✳️ 多路复用详解：

> 同一 TCP 连接中可并发处理多个请求，每个请求由独立的“流 ID”标识，**解决了 HTTP/1.x 的队头阻塞问题**。

---

### ✳️ 二进制分帧机制：

* 每条消息（如请求/响应）拆分成多个 **帧（Frame）**
* 帧有类型，如 `HEADERS`、`DATA` 等
* 帧可乱序发送，由流 ID 重组

---

### ✳️ 头部压缩机制（HPACK）：

```text
请求1: 发送完整头部字段
请求2: 只发送变化部分，其他从头部表中复用
→ 显著减少重复头部开销
```

---

### ✳️ 服务器推送机制（Server Push）：

> 服务器可在主页面响应前，**预推送相关静态资源**（如 CSS、JS、图片），无需等待客户端请求。

---

## 📊 五、三者对比总结

| 特性/版本  | HTTP/1.0 | HTTP/1.1          | HTTP/2.0     |
| ------ | -------- | ----------------- | ------------ |
| 连接管理   | 短连接      | 默认长连接（keep-alive） | 单连接多并发（多路复用） |
| 请求并发   | 无        | 管道化（顺序响应）         | 多请求并发，异步响应   |
| 数据传输格式 | 文本       | 文本                | 二进制分帧        |
| 头部压缩   | 无        | 无                 | HPACK 头部压缩   |
| 服务器推送  | 无        | 无                 | 支持           |
| 虚拟主机支持 | 无        | 有（Host 字段）        | 有            |
| 缓存机制   | 基本支持     | 丰富的缓存控制头          | 同 HTTP/1.1   |
| 队头阻塞   | 存在       | 存在                | 解决           |

---

## 📚 六、常见面试问答总结

> 💬 HTTP/1.1 相比 1.0 有哪些改进？

* 默认支持长连接
* 增强缓存机制
* 支持虚拟主机（Host）
* 断点续传（Range）

---

> 💬 HTTP/2 如何实现多路复用？

* 同一个 TCP 连接中可发送多个流（stream），每个流有唯一标识
* 多个帧可乱序发送，根据流 ID 重组，互不干扰

---

> 💬 HTTP/2 为什么使用二进制而非文本？

* 二进制更易解析、更高效，避免文本格式歧义
* 可拆分帧，更灵活地组织数据结构（如压缩、复用）

---

> 💬 HTTP/2 的服务器推送适合哪些场景？

* 页面初始加载时提前推送关键资源（如 JS、CSS）
* 减少客户端请求数，提升首屏速度

---

## 🔚 七、小结

* HTTP/1.0 是早期标准，缺乏连接与缓存优化
* HTTP/1.1 引入持久连接、缓存控制、虚拟主机等机制，大大提升性能
* HTTP/2 彻底革新传输方式，解决了队头阻塞，支持服务器推送和帧压缩，是现代 Web 性能的关键
